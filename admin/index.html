<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin — Pennyriser</title>
  <link rel="stylesheet" href="/assets/styles.css" />
</head>
<body>
  <main class="container">
    <article class="card" style="max-width:980px">
      <h2>Admin</h2>
      <p id="who" class="tldr">Checking sign-in…</p>

      <!-- NOTICE -->
      <section class="card" style="margin-top:12px">
        <h3>Notice Bar</h3>
        <label>Text</label>
        <textarea id="noticeTextInput" rows="2" placeholder="Education only — not financial advice."></textarea>
        <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin:8px 0">
          <label>Priority <input id="noticePriority" type="number" value="10" style="width:120px"></label>
          <label><input id="noticeActive" type="checkbox" checked> Active</label>
        </div>
        <button class="btn btn-primary" id="saveNotice">Save Notice</button>
        <span id="noticeMsg" class="small"></span>
      </section>

      <!-- AD -->
      <section class="card" style="margin-top:12px">
        <h3>Sidebar Ad</h3>
        <label>Headline</label>
        <input id="adHeadline" type="text" placeholder="Compare Mortgage Deals">
        <label>Body</label>
        <textarea id="adBody" rows="2" placeholder="Find a lower rate in minutes."></textarea>
        <label>Link URL</label>
        <input id="adLink" type="url" placeholder="https://example.com">
        <div style="margin:8px 0">
          <label><input id="adActive" type="checkbox" checked> Active</label>
        </div>
        <button class="btn btn-primary" id="saveAd">Save Ad</button>
        <span id="adMsg" class="small"></span>
      </section>

     <!-- LESSONS CMS -->
<section class="card" style="margin-top:12px">
  <h3>Lessons CMS</h3>

  <div class="card" style="margin-bottom:12px">
    <h4>Create / Edit Lesson</h4>
    <input type="hidden" id="lessonId" />
    <label>Title</label>
    <input id="lessonTitle" type="text" placeholder="Asset vs Liability" />

    <label>Slug (unique, URL-friendly)</label>
    <input id="lessonSlug" type="text" placeholder="asset-vs-liability" />

    <label>Category</label>
    <select id="lessonCategory">
      <option value="finance">Personal Finance</option>
      <option value="trading">Stock Trading</option>
    </select>

    <label>Content (HTML allowed; keep it simple)</label>
    <textarea id="lessonContent" rows="8" placeholder="<p>Short lesson body...</p>"></textarea>

    <label>Status</label>
    <select id="lessonStatus">
      <option value="draft">draft</option>
      <option value="published">published</option>
    </select>

    <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap">
      <button class="btn btn-primary" id="saveLesson">Save / Update</button>
      <button class="btn" id="newLesson">New</button>
      <button class="btn" id="deleteLesson">Delete</button>
    </div>
    <span id="lessonMsg" class="small"></span>
  </div>

  <div class="card">
    <h4>All Lessons</h4>
    <div style="display:flex; gap:8px; align-items:center; margin-bottom:8px; flex-wrap:wrap">
      <label>Filter by category
        <select id="filterCategory">
          <option value="all">All</option>
          <option value="finance">Personal Finance</option>
          <option value="trading">Stock Trading</option>
        </select>
      </label>
    </div>
    <table class="table" style="width:100%">
      <thead><tr><th>Title</th><th>Slug</th><th>Category</th><th>Status</th><th>Updated</th><th></th></tr></thead>
      <tbody id="lessonsTable"></tbody>
    </table>
  </div>
</section>


      <div style="display:flex; gap:8px; margin-top:16px">
        <a class="btn" href="/">Home</a>
        <button class="btn" id="backToLogin">Back to Login</button>
        <button class="btn" id="logout">Log out</button>
      </div>
    </article>
  </main>

  <!-- Scripts -->
  <script src="/assets/firebase-config.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>
  <script src="/admin/admin.js"></script>
  <!-- Bottom Nav -->
<nav class="bottom-nav" role="navigation" aria-label="Primary">
  <ul>
    <li><a href="/" data-match="/">
      <span class="icon">🏠</span><span>Home</span>
    </a></li>
    <li><a href="/lessons/index.html" data-match="/lessons/">
      <span class="icon">📚</span><span>Lessons</span>
    </a></li>
    <li><a href="/calculators/mortgage-overpayment.html" data-match="/calculators/">
      <span class="icon">🧮</span><span>Calculator</span>
    </a></li>
    <!-- Login / Logout (toggled by nav.js if Firebase available) -->
    <li><a id="bn-login" href="/auth/login.html">
      <span class="icon">🔑</span><span>Log in</span>
    </a></li>
    <li><a id="bn-logout" href="/auth/login.html" hidden>
      <span class="icon">🚪</span><span>Log out</span>
    </a></li>
    <!-- Admin (only shown for admins) -->
    <li><a id="bn-admin" href="/admin/index.html" data-match="/admin/" hidden>
      <span class="icon">🛠️</span><span>Admin</span>
    </a></li>
  </ul>
</nav>

<!-- Load AFTER your other scripts -->
<script src="/assets/nav.js"></script>

</body>
</html>
